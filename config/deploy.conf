# PerfStackSuite 部署配置文件
# 此文件包含所有安装脚本共用的配置参数

# ============================================
# 基础配置
# ============================================
INSTALL_BASE_DIR=/opt
DATA_BASE_DIR=/data
LOG_BASE_DIR=/var/log

# ============================================
# 组件版本和安装包
# ============================================
PROMETHEUS_VERSION=3.5.1
GRAFANA_VERSION=12.3.2
INFLUXDB_VERSION=2.8.0
NODE_EXPORTER_VERSION=1.10.2
JDK_VERSION=8u381
JMETER_VERSION=5.6.3

# ============================================
# 端口配置
# ============================================
PROMETHEUS_PORT=9090
GRAFANA_PORT=3000
INFLUXDB_PORT=8086
NODE_EXPORTER_PORT=9100
SSH_PORT=22

# ============================================
# 服务账号
# ============================================
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin
INFLUXDB_ADMIN_USER=admin
INFLUXDB_ADMIN_PASSWORD=admin
INFLUXDB_JMETER_USER=jmeter
INFLUXDB_JMETER_PASSWORD=jmeter

# ============================================
# InfluxDB 配置
# ============================================
INFLUXDB_DB_NAME=jmeter
INFLUXDB_RETENTION=30d

# ============================================
# Prometheus 配置
# ============================================
PROMETHEUS_RETENTION_TIME=30d

# ============================================
# JMeter 网络连接回收配置
# ============================================
JMETER_HTTP_IDLE_TIMEOUT=60000
JMETER_HTTP_VALIDATE_INACTIVITY=2000
JMETER_HTTP_TIME_TO_LIVE=60000
JMETER_HTTP_MAX_RETRIES=1
JMETER_HTTP_REQUEST_SENT_RETRY=false
JMETER_HTTP_STALE_CHECKING=true

# ============================================
# 系统内核参数优化配置
# ============================================
SYSCTL_TCP_TW_REUSE=1
SYSCTL_TCP_TW_RECYCLE=0
SYSCTL_TCP_FIN_TIMEOUT=30
SYSCTL_IP_LOCAL_PORT_RANGE="1024 65535"
SYSCTL_NF_CONNTRACK_MAX=262144
SYSCTL_NF_CONNTRACK_TCP_TIMEOUT_TIME_WAIT=30

# ============================================
# 远程部署配置
# ============================================
DEPLOY_PARALLEL_NUM=5
DEPLOY_TIMEOUT=600
SSH_CONNECT_TIMEOUT=30
SCP_RETRY_COUNT=3

# 远程服务器列表
# 格式：server_name,ip_address,user,port[,password]
# 说明：
#   - server_name: 服务器名称（唯一标识）
#   - ip_address: 服务器 IP 地址
#   - user: SSH 登录用户名
#   - port: SSH 端口（默认 22）
#   - password: SSH 登录密码（可选，不配置则使用 SSH 密钥认证）
TARGET_SERVERS=(
    # 示例 1：使用 SSH 密钥认证（推荐）
    # "web-01,192.168.1.100,deployer,22"
    # "app-01,192.168.1.101,deployer,22"

    # 示例 2：使用密码认证（需要安装 sshpass）
    # "web-02,192.168.1.102,deployer,22,mypassword"
    # "app-02,192.168.1.103,deployer,22,mypassword"
)

# ============================================
# 安装包路径
# ============================================
SOFT_DIR=./soft
CONFIG_DIR=./config

# ============================================
# 日志配置
# ============================================
LOG_FILE=./log/install.log
LOG_LEVEL=INFO
